重构系统，添加设计模式
